<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home - Malaysia Pickleball Association</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/styles.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  
  <!-- No external CDN scripts needed - using vanilla JavaScript -->
  <style>
    /* Performance optimizations */
    :root {
      --animation-duration: 0.3s;
      --animation-timing: cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    /* Respect user's motion preferences */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }
    
    /* Optimized base styles */
    html {
      scroll-behavior: smooth;
      -webkit-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
    }
    
    * {
      box-sizing: border-box;
    }
    
    body {
      -webkit-overflow-scrolling: touch;
      overscroll-behavior: contain;
      scroll-behavior: smooth;
    }
    
    /* Professional Hero Section */
    .hero-section {
      position: relative;
      overflow: hidden;
      margin-top: 0;
      padding-top: 2rem;
      min-height: 100vh;
      display: flex;
      align-items: center;
    }
    
    /* Blurred background for all screen sizes */
    .hero-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('/images/defaultbg.png') center center;
      background-size: cover;
      background-repeat: no-repeat;
      background-attachment: fixed;
      filter: blur(5px);
      z-index: 1;
    }
    
    /* Dark overlay for better text contrast */
    .hero-section::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.3);
      z-index: 2;
    }
    
    .hero-content {
      position: relative;
      z-index: 3;
      animation: fadeInUp 0.8s ease-out;
    }
    
    /* Make all hero section text white on all screen sizes */
    .hero-section h1,
    .hero-section h2,
    .hero-section h3,
    .hero-section h4,
    .hero-section h5,
    .hero-section h6,
    .hero-section p,
    .hero-section div,
    .hero-section span {
      color: #ffffff !important;
      -webkit-text-fill-color: #ffffff !important;
    }
    
    /* Override gradient text specifically */
    .hero-section .gradient-text {
      color: #ffffff !important;
      background: none !important;
      background-image: none !important;
      -webkit-background-clip: initial !important;
      background-clip: initial !important;
      -webkit-text-fill-color: #ffffff !important;
    }
    
    /* Comprehensive white text styling for all hero section elements */
    .hero-section *:not(img):not(svg) {
      color: #ffffff !important;
      -webkit-text-fill-color: #ffffff !important;
    }
    
    /* Add text shadow for better readability over blurred background */
    .hero-section h1,
    .hero-section h2,
    .hero-section h3,
    .hero-section h4,
    .hero-section h5,
    .hero-section h6,
    .hero-section p {
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
    }
    
    /* Enhanced logo with glow effect */
    .hero-logo-container {
      position: relative;
      display: inline-block;
    }
    
    .hero-logo {
      filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.4));
      animation: logoFloatIn 1.2s ease-out;
      transition: transform 0.3s ease;
    }
    
    .hero-logo:hover {
      transform: scale(1.05) rotate(2deg);
      filter: drop-shadow(0 12px 24px rgba(255, 215, 0, 0.3));
    }

    /* Vision & Mission Styles */
    .grid > div {
      animation: fadeInUp 1s ease-out 0.3s both;
    }

    .grid > div:nth-child(3) {
      animation-delay: 0.6s;
    }


    

    
        @keyframes logoFloatIn {
      0% {
        opacity: 0;
        transform: translate3d(0, -20px, 0) scale(0.9);
      }
      100% {
        opacity: 1;
        transform: translate3d(0, 0, 0) scale(1);
      }
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translate3d(0, 20px, 0);
      }
      to {
        opacity: 1;
        transform: translate3d(0, 0, 0);
      }
    }
    
    /* Mobile-Specific Hero Optimizations */
    @media (max-width: 768px) {
      /* Override body gradient behind hero section */
      body {
        background: #ffffff !important;
      }
      
      .hero-section {
        min-height: 90vh;
        padding: 1rem 0;
      }
      
      /* Increase blur on mobile for better effect */
      .hero-section::before {
        filter: blur(8px) !important;
        background-attachment: scroll !important;
      }
      

      
      .hero-section > div[class*="absolute"],
      .hero-section > div[class*="overlay"] {
        display: none !important;
      }
      
      /* Hide floating background elements on mobile for cleaner view */
      .floating-element {
        display: none !important;
      }
      
      .hero-content {
        padding: 0 1rem;
        position: relative;
        z-index: 4;
      }
      
      /* Add text shadow for better readability over blurred background */
      .hero-section h1,
      .hero-section p {
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
      }
      
      /* Ensure all text elements are visible above blurred background */
      .hero-content * {
        position: relative;
        z-index: 5;
      }
      
      .hero-logo-container {
        margin-bottom: 1rem;
      }
      
      .hero-logo {
        width: 6rem !important;
        height: 6rem !important;
      }
      
      /* Mobile typography adjustments with white text */
      .hero-content h1 {
        font-size: 2rem !important;
        line-height: 1.2 !important;
        margin-bottom: 1rem !important;
        color: #ffffff !important;
      }
      
      .hero-content p {
        font-size: 1rem !important;
        line-height: 1.5 !important;
        margin-bottom: 1.5rem !important;
        padding: 0 0.5rem;
        color: #ffffff !important;
      }

      /* Force ALL text in hero section to be white on mobile */
      .hero-section * {
        color: #ffffff !important;
        background: transparent !important;
        background-image: none !important;
        -webkit-background-clip: initial !important;
        background-clip: initial !important;
        -webkit-text-fill-color: #ffffff !important;
        position: relative !important;
        z-index: 5 !important;
      }
      
      .hero-section h1,
      .hero-section h2, 
      .hero-section h3,
      .hero-section h4,
      .hero-section h5,
      .hero-section h6 {
        color: #ffffff !important;
        -webkit-text-fill-color: #ffffff !important;
        position: relative !important;
        z-index: 5 !important;
      }
      
      .hero-section p,
      .hero-section div,
      .hero-section span {
        color: #ffffff !important;
        -webkit-text-fill-color: #ffffff !important;
        position: relative !important;
        z-index: 5 !important;
      }
      
      /* Override gradient text specifically */
      .hero-section .gradient-text {
        color: #ffffff !important;
        background: none !important;
        background-image: none !important;
        -webkit-background-clip: initial !important;
        background-clip: initial !important;
        -webkit-text-fill-color: #ffffff !important;
        position: relative !important;
        z-index: 5 !important;
      }

      /* Adjust mission item spacing on mobile */
      .grid > div .space-y-3 {
        gap: 0.5rem !important;
      }
      
      /* Reduce mission point spacing on mobile */
      .hero-section .space-y-4 > div {
        margin-bottom: 0.1rem !important;
      }
      
      .hero-section .space-y-4 > div:last-child {
        margin-bottom: 0 !important;
      }
      
      /* Make mission points more compact on mobile */
      .hero-section .space-y-4 {
        gap: 0.1rem !important;
        display: flex !important;
        flex-direction: column !important;
      }
      
      /* Override default space-y-4 class on mobile */
      .hero-section .space-y-4 > * + * {
        margin-top: 0.1rem !important;
      }

      /* Hide divider line on mobile */
      .absolute.left-1\/2 {
        display: none !important;
      }


      
      
    }
    
    /* Tablet optimizations */
    @media (min-width: 769px) and (max-width: 1024px) {
      .hero-section {
        min-height: 85vh;
      }
      
      .hero-logo {
        width: 8rem !important;
        height: 8rem !important;
      }
      
      .hero-content h1 {
        font-size: 3rem !important;
      }
    }
    
        /* Optimized floating elements - reduced count and complexity */
    .floating-element {
      animation: float 8s ease-in-out infinite;
      animation-fill-mode: both;
    }

    .floating-element:nth-child(2n) {
      animation-delay: -4s;
    }

    @keyframes float {
      0%, 100% { transform: translate3d(0, 0px, 0); }
      50% { transform: translate3d(0, -15px, 0); }
    }
    
        /* Optimized video container */
    .video-container {
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .video-container:hover {
      transform: translateY(-4px) scale(1.01);
    }

    /* Simplified backdrop effects for better performance */
    .optimized-backdrop {
      background: rgba(255, 255, 255, 0.1);
    }
    
    /* Optimized responsive video */
    .aspect-w-16 {
      position: relative;
      padding-bottom: 56.25%;
      overflow: hidden;
    }
    
    .aspect-w-16 iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
      border-radius: 1.5rem 1.5rem 0 0;
    }
    
    /* Optimized buttons */
    .action-button {
      transition: all var(--animation-duration) var(--animation-timing);
      will-change: transform;
    }
    
    .action-button:hover {
      transform: translateY(-2px);
    }
    
    /* Mobile optimizations */
    @media (max-width: 768px) {
      .hero-section {
        padding-top: 1rem;
        background-attachment: scroll; /* Better performance on mobile */
      }
      
      .hero-logo {
        width: 8rem !important;
        height: 8rem !important;
      }
      
      .floating-element {
        animation-duration: 12s; /* Slower on mobile */
      }
      
      .video-container:hover {
        transform: translateY(-2px);
      }
      
      /* Removed backdrop blur effects for cleaner appearance */
    }
    
    /* Tablet optimizations */
    @media (min-width: 641px) and (max-width: 1024px) {
      .hero-section {
        padding-top: 1.5rem;
      }
      
      .video-container:hover {
        transform: translateY(-3px) scale(1.005);
      }
    }
    
    /* Ensure proper content positioning */
    main {
      position: relative;
      z-index: 10;
    }
    
    @media (max-width: 768px) {
      main {
        margin-left: 0 !important;
      }
    }
    
    /* Optimized decorative elements */
    .decorative-bg {
      opacity: 0.1;
      animation: pulse 4s ease-in-out infinite;
    }
    
    .decorative-bg:nth-child(2) {
      animation-delay: 1s;
    }
    
    .decorative-bg:nth-child(3) {
      animation-delay: 2s;
    }
    
    /* Lazy loading optimization */
    .lazy-load {
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    .lazy-load.loaded {
      opacity: 1;
    }
    
    /* Background optimization */
    .bg-optimized {
      backface-visibility: hidden;
    }
    
        /* Popup optimizations */
    .popup-modal {
      background: rgba(0, 0, 0, 0.5);
    }

    .popup-content {
      transition: transform 0.3s ease;
    }

    /* News Carousel Styles */
    .news-carousel-container {
      height: auto; /* Let content define height to avoid clipping */
      width: 100%;
      overflow: hidden;
      position: relative;
    }
    
    /* Flexible layout for desktop view */
    @media (min-width: 1025px) {
      /* Enable carousel behavior on desktop and increase card widths */
      .news-carousel-container { overflow: hidden; height: auto; width: 100%; }
      .news-carousel { justify-content: flex-start; flex-wrap: nowrap; width: 100%; }
      #latestNewsContainer .bg-white { width: 100%; min-width: 100%; max-width: 100%; }
    }
    
    .news-carousel {
      display: flex;
      flex-direction: column; /* stack vertically */
      gap: 1rem;
      overflow-y: auto; /* vertical scroll */
      scroll-behavior: smooth;
      -webkit-overflow-scrolling: touch;
      scroll-snap-type: y mandatory;
      max-height: 700px; /* show stacked cards without clipping */
    }
    
    .news-card {
      width: auto; /* Flexible width based on content */
      min-width: 300px; /* Minimum width to maintain readability */
      max-width: 600px; /* Maximum width to prevent cards from being too wide */
      height: 250px; /* Increased height for brief summary */
      flex: 0 0 auto; /* Allow flexible sizing */
      overflow: hidden; /* Prevent content overflow */
    }
    
    /* Latest News API cards specific styling for all screen sizes */
    #latestNewsContainer {
      display: flex; /* Horizontal flex layout */
      flex-direction: row; /* Side by side layout */
      gap: 1rem; /* Space between cards */
      overflow: hidden; /* Hide all scrollbars */
      height: 580px; /* Fixed height for container */
      position: relative;
      scroll-behavior: smooth;
    }
    
    /* Force proper horizontal stacking of news cards */
    #latestNewsContainer > * {
      display: block !important;
      flex: 0 0 calc(120% - 1rem); /* Each card takes 120% of container width for bigger cards */
      width: calc(120% - 1rem); /* Wider cards */
      position: static !important; /* Force static positioning */
      min-width: 0; /* Allow shrinking if needed */
    }
    
    /* Make news images bigger */
    #latestNewsContainer img,
    #latestNewsContainer video,
    #latestNewsContainer > div > div:first-child {
      height: 14rem !important; /* h-56 equivalent - larger images */
      width: 100% !important;
      object-fit: cover !important;
    }
    
    #latestNewsContainer .bg-white {
      width: calc(120% - 1rem); /* Wider cards */
      height: 520px; /* Extended height for more bottom space */
      margin: 0; /* No margins - use gap instead */
      display: block;
      position: static; /* Simple static positioning */
      flex-shrink: 0; /* Prevent shrinking */
    }
    
    /* Desktop specific styling */
    @media (min-width: 768px) {
      #latestNewsContainer {
        display: flex; /* Horizontal flex layout on desktop */
        flex-direction: row; /* Side by side */
        overflow: hidden; /* Hide all scrollbars on desktop */
        width: 100%; /* Full width to match video section */
        height: 620px; /* Extended height to accommodate taller cards */
        gap: 1rem; /* Space between cards */
      }
      
      #latestNewsContainer .bg-white {
        height: 600px; /* Extended height for more bottom space */
        width: calc(120% - 1rem); /* Wider cards */
        margin: 0; /* No margins - use gap */
        display: block; /* Block display */
        position: static; /* Static positioning */
        flex: 0 0 calc(120% - 1rem); /* Each card takes 120% of container width for bigger cards */
      }
      
      #latestNewsContainer .bg-white img,
      #latestNewsContainer .bg-white video,
      #latestNewsContainer .bg-white > div:first-child {
        height: 14rem !important; /* h-56 equivalent - much larger images */
      }
      
      /* Ensure full summary is visible without truncation */
      #latestNewsContainer .bg-white p {
        display: block !important;
        -webkit-line-clamp: unset !important;
        -webkit-box-orient: unset !important;
        overflow: visible !important;
        text-overflow: unset !important;
      }
    }
    
    /* Mobile specific API cards */
    @media (max-width: 767px) {
      #latestNewsContainer .bg-white {
        min-width: 220px; /* Smaller minimum for mobile */
        max-width: calc(100vw - 3rem); /* Maximum width for mobile */
        height: auto; /* Flexible height for mobile */
        min-height: 380px; /* Increased minimum height for mobile content */
      }
    }
    
    /* Auto-scroll indicator animations */
    .news-indicators button {
      transition: all 0.3s ease;
    }
    
    .news-indicators button:hover {
      transform: scale(1.2);
    }
    
    /* Responsive design for news cards */
    @media (max-width: 1024px) {
      .news-card {
        min-width: 280px;
        max-width: 500px;
        width: auto; /* Flexible width for tablet */
        height: 260px;
      }
      
      .news-carousel-container {
        height: 300px;
      }
    }
    
    @media (max-width: 768px) {
      .news-card {
        width: auto; /* Flexible width based on content */
        min-width: 250px; /* Minimum width for mobile readability */
        max-width: calc(100vw - 2rem); /* Maximum width to fit screen */
        height: 500px; /* Increased height to fit all content */
        flex: 0 0 auto; /* Allow flexible sizing */
      }
      
      .news-carousel-container {
        height: 540px; /* Increased to accommodate taller cards */
        margin: 0 -1rem;
        padding: 0 1rem;
        overflow: hidden; /* Hide scrollbars on mobile */
      }
      
      .news-carousel {
        justify-content: flex-start;
        gap: 1rem; /* Space between flexible cards */
        flex-wrap: nowrap; /* Keep cards in single row for mobile scrolling */
      }
      
      /* Make the entire news section more mobile-friendly */
      .news-section {
        padding: 0 1rem;
      }
      
      /* Adjust header for mobile */
      .news-section .flex.items-center.justify-between {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
      }
      
      /* Mobile navigation buttons */
      .news-section .flex.items-center.space-x-4 {
        width: 100%;
        justify-content: space-between;
      }
    }
    
    @media (max-width: 480px) {
      .news-card {
        width: auto; /* Flexible width based on content */
        min-width: 220px; /* Minimum width for small mobile readability */
        max-width: calc(100vw - 1.5rem); /* Maximum width to fit small screens */
        height: 480px; /* Increased height to fit all content */
        flex: 0 0 auto; /* Allow flexible sizing */
      }
      
      .news-carousel-container {
        height: 520px; /* Increased to accommodate taller cards */
        margin: 0 -0.5rem;
        padding: 0 0.5rem;
        overflow: hidden; /* Hide scrollbars on small mobile */
      }
      
      .news-carousel {
        justify-content: flex-start;
        gap: 0.75rem; /* Space between flexible cards on small screens */
        flex-wrap: nowrap; /* Keep cards in single row for mobile scrolling */
      }
      
      /* Further optimize for small screens */
      .news-section,
      .video-section {
        padding: 0 0.5rem;
      }
      
      /* Stack header elements on very small screens */
      .news-section h2,
      .video-section h2 {
        font-size: 2rem !important;
      }
      
      /* Ensure no horizontal overflow */
      .news-section .flex.items-center.space-x-4,
      .video-section .flex.items-center.space-x-4 {
        flex-wrap: wrap;
        gap: 0.5rem;
      }
      
      /* Video list small mobile */
      .video-item {
        margin-bottom: 1rem;
      }
      
      /* Make navigation buttons smaller on mobile */
      #newsScrollLeft,
      #newsScrollRight {
        width: 2rem;
        height: 2rem;
      }
      
      /* Video list mobile styles */
      .video-item {
        margin-bottom: 1.5rem;
      }
      
      /* Make the entire video section more mobile-friendly */
      .video-section {
        padding: 0 1rem;
      }
      
      /* Adjust video header for mobile */
      .video-section .flex.items-center.justify-between {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
      }
    }
    
    /* Smooth hover effects for navigation buttons */
    #newsScrollLeft:hover,
    #newsScrollRight:hover {
      transform: scale(1.1);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    
    /* Video List Styles */
    .video-list-container {
      width: 100%;
    }
    
    .video-item {
      width: 100%;
      margin-bottom: 1.5rem;
    }
    
    .video-item:last-child {
      margin-bottom: 0;
    }
    
    /* Line clamp utility moved to main styles.css file */
    
    /* Horizontal Scroll Timeline Styles */
    .timeline-section {
      position: relative;
      background: linear-gradient(135deg, #f8fafc 0%, #fff 100%);
      padding: 2rem 0;
    }
    
    .timeline-horizontal-container {
      position: relative;
      width: 100%;
      height: 700px;
      overflow-x: auto;
      overflow-y: hidden;
      /* Custom scrollbar styling */
      scrollbar-width: thin;
      scrollbar-color: #f59e0b #f3f4f6;
    }
    
    /* Webkit scrollbar styling */
    .timeline-horizontal-container::-webkit-scrollbar {
      height: 12px;
    }
    
    .timeline-horizontal-container::-webkit-scrollbar-track {
      background: #f3f4f6;
      border-radius: 10px;
    }
    
    .timeline-horizontal-container::-webkit-scrollbar-thumb {
      background: linear-gradient(90deg, #fbbf24, #f59e0b);
      border-radius: 10px;
      border: 2px solid #f3f4f6;
    }
    
    .timeline-horizontal-container::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(90deg, #f59e0b, #d97706);
    }
    
    .timeline-wrapper {
      display: flex;
      align-items: flex-start;
      height: 100%;
      gap: 1rem;
      padding: 1.5rem;
      /* Dynamic width will be set by JavaScript */
      min-width: 100%;
      position: relative;
    }
    
    /* Continuous horizontal line across all milestones */
    .timeline-wrapper::before {
      content: '';
      position: absolute;
      top: 120px; /* Position for the line */
      left: 1.5rem;
      right: 1.5rem;
      height: 4px;
      background: linear-gradient(90deg, #fbbf24, #f59e0b, #d97706);
      border-radius: 2px;
      box-shadow: 0 2px 10px rgba(251, 191, 36, 0.3);
      z-index: 1;
    }
    
    .timeline-item {
      flex: 0 0 420px; /* Fixed width for each milestone */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      position: relative;
      height: 100%;
      z-index: 2;
    }
    
    /* Date above the timeline */
    .timeline-date {
      font-size: 0.875rem;
      font-weight: 600;
      color: #f59e0b;
      margin-bottom: 15px;
      text-align: center;
      letter-spacing: 0.5px;
      text-transform: uppercase;
      background: rgba(255, 255, 255, 0.9);
      padding: 8px 12px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      border: 1px solid rgba(251, 191, 36, 0.2);
    }
    
    /* Timeline point/dot on the line */
    .timeline-point {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: linear-gradient(135deg, #fbbf24, #f59e0b);
      border: 3px solid white;
      box-shadow: 0 4px 12px rgba(251, 191, 36, 0.4);
      margin-bottom: 60px;
      position: relative;
      z-index: 3;
      transition: all 0.3s ease;
    }
    
    .timeline-point:hover {
      transform: scale(1.2);
      box-shadow: 0 6px 20px rgba(251, 191, 36, 0.6);
    }
    
    /* Milestone content container */
    .milestone-content {
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: all 0.3s ease;
      max-width: 420px;
      min-height: 400px;
    }
    
    .milestone-content:hover {
      transform: translateY(-5px);
    }
    
    /* Milestone image */
    .milestone-content img {
      width: 400px;
      height: 250px;
      border-radius: 15px;
      object-fit: cover;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      transition: transform 0.3s ease;
      margin-bottom: 20px;
    }
    
    .milestone-content img:hover {
      transform: scale(1.05);
    }
    
    /* Fallback for missing image */
    .milestone-content .image-placeholder {
      width: 400px;
      height: 250px;
      border-radius: 15px;
      background: linear-gradient(135deg, #fbbf24, #f59e0b);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 25px rgba(251, 191, 36, 0.3);
      margin-bottom: 20px;
    }
    
    .milestone-content .image-placeholder i {
      font-size: 3rem;
      color: white;
    }
    
    /* Milestone title */
    .milestone-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: #1f2937;
      margin-bottom: 12px;
      line-height: 1.3;
    }
    
    /* Milestone description */
    .milestone-description {
      font-size: 1rem;
      color: #6b7280;
      line-height: 1.6;
      max-width: 320px;
      flex: 1;
      display: flex;
      align-items: flex-start;
    }
    
    /* Category colors */
    .category-foundation { background: rgba(59, 130, 246, 0.1); color: #3b82f6; }
    .category-tournament { background: rgba(16, 185, 129, 0.1); color: #10b981; }
    .category-recognition { background: rgba(245, 158, 11, 0.1); color: #f59e0b; }
    .category-development { background: rgba(139, 92, 246, 0.1); color: #8b5cf6; }
    .category-partnership { background: rgba(236, 72, 153, 0.1); color: #ec4899; }
    .category-achievement { background: rgba(249, 115, 22, 0.1); color: #f97316; }
    .category-expansion { background: rgba(99, 102, 241, 0.1); color: #6366f1; }
    .category-innovation { background: rgba(239, 68, 68, 0.1); color: #ef4444; }
    
    /* Mobile responsiveness */
    @media (max-width: 768px) {
      .timeline-horizontal-container {
        height: 600px;
        margin: 0 1rem;
      }
      
      .timeline-wrapper {
        padding: 1rem;
        gap: 1rem;
      }
      
      .timeline-wrapper::before {
        top: 100px; /* Adjust line position for mobile */
        left: 1rem;
        right: 1rem;
      }
      
      .timeline-item {
        flex: 0 0 340px;
      }
      
      .timeline-date {
        font-size: 0.75rem;
        padding: 6px 10px;
      }
      
      .timeline-point {
        width: 14px;
        height: 14px;
        margin-bottom: 50px;
      }
      
      .milestone-content {
        max-width: 360px;
        min-height: 350px;
      }
      
      .milestone-content img,
      .milestone-content .image-placeholder {
        width: 320px;
        height: 250px;
      }
      
      .milestone-title {
        font-size: 1.25rem;
      }
      
      .milestone-description {
        font-size: 0.9rem;
        max-width: 280px;
      }
    }
    
    @media (max-width: 480px) {
      .timeline-horizontal-container {
        height: 550px;
        margin: 0 0.5rem;
      }
      
      .timeline-wrapper {
        padding: 0.75rem;
        gap: 0.75rem;
      }
      
      .timeline-wrapper::before {
        top: 85px; /* Adjust line position for small mobile */
        left: 0.75rem;
        right: 0.75rem;
      }
      
      .timeline-item {
        flex: 0 0 300px;
      }
      
      .timeline-date {
        font-size: 0.7rem;
        padding: 5px 8px;
      }
      
      .timeline-point {
        width: 12px;
        height: 12px;
        margin-bottom: 40px;
      }
      
      .milestone-content {
        max-width: 300px;
        min-height: 320px;
      }
      
      .milestone-content img,
      .milestone-content .image-placeholder {
        width: 280px;
        height: 250px;
      }
      
      .milestone-title {
        font-size: 1.125rem;
      }
      
      .milestone-description {
        font-size: 0.85rem;
        max-width: 240px;
      }
    }
    
    /* Ensure Latest News cards match Featured Videos height */
    #latestNewsContainer .latest-news-card {
      height: auto; /* Natural height */
      display: flex;
      flex-direction: column;
    }
    #latestNewsContainer .latest-news-card > img,
    #latestNewsContainer .latest-news-card > video,
    #latestNewsContainer .latest-news-card > div:first-child {
      flex-shrink: 0;
    }
    #latestNewsContainer .latest-news-card .p-6 {
      flex: 1 1 auto;
      display: flex;
      flex-direction: column;
    }
    #latestNewsContainer .latest-news-card .p-6 p {
      display: -webkit-box !important;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
  </style>
</head>
<%
  const defaultBg = backgroundImage || '/images/defaultbg.png';
%>
<body class="min-h-screen relative overflow-x-hidden bg-gradient-to-br from-gray-100 via-gray-50 to-white">
  <!-- Clean gradient background instead of image -->
  
  <%- include('../partials/header') %>
  
  <!-- Optimized floating elements - reduced count -->
  <div class="fixed inset-0 pointer-events-none z-0">
    <div class="floating-element absolute top-20 left-10 w-4 h-4 bg-yellow-400 rounded-full opacity-50"></div>
    <div class="floating-element absolute bottom-32 right-20 w-5 h-5 bg-green-400 rounded-full opacity-40"></div>
  </div>
  
  <main class="min-h-screen relative z-10" style="padding-top: var(--navbar-height);">
    <!-- Professional Hero Section -->
    <section class="hero-section py-12 md:py-20">
      <div class="container mx-auto px-4 md:px-6">
        <div class="hero-content text-center max-w-5xl mx-auto">
          <!-- Malaysia Pickleball Association Logo -->
          <div class="flex justify-center mb-6 md:mb-8">
            <div class="hero-logo-container relative">
              <img src="/images/mpa.png" alt="Malaysia Pickleball Association" class="hero-logo relative w-24 h-24 sm:w-32 sm:h-32 md:w-40 md:h-40 lg:w-48 lg:h-48 object-contain lazy-load" loading="lazy">
            </div>
          </div>
          
          <!-- Main Heading -->
          <h1 class="text-3xl sm:text-4xl md:text-6xl lg:text-7xl font-bold mb-4 md:mb-6 leading-tight">
            <span class="gradient-text" style="color: #000000 !important;">
              Malaysia
            </span>
            <br class="sm:hidden">
            <span class="gradient-text" style="color: #000000 !important;">
              Pickleball Association
            </span>
          </h1>
          
          <!-- Description Text -->
          <div class="max-w-4xl mx-auto px-4 sm:px-6 mb-8 md:mb-12">
            <p class="text-base md:text-lg text-black leading-relaxed text-center" style="color: #000000 !important;">
              The Malaysia Pickleball Association (MPA), the national governing body for pickleball, promotes and regulates the sport in Malaysia. It organizes tournaments, supports training and certification, advocates for dedicated facilities, and builds inclusive communities. By collaborating with government and sports bodies, the MPA drives pickleball's growth, fostering active lifestyles and positioning Malaysia as a regional hub for this dynamic sport.
            </p>
          </div>

          <!-- Vision & Mission -->
          <div class="max-w-6xl mx-auto px-4 sm:px-6">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-16 relative">
              
              <!-- Vertical divider line (hidden on mobile) -->
              <div class="absolute left-1/2 top-0 bottom-0 w-px bg-gradient-to-b from-transparent via-blue-400 to-transparent hidden lg:block transform -translate-x-1/2"></div>
              
              <!-- Vision & Objective -->
              <div class="text-center lg:text-right lg:pr-8">
                <h3 class="text-3xl md:text-4xl font-bold mb-6 text-gray-800" style="font-style: italic; color: #000000 !important;">
                  Vision
                </h3>
                <p class="text-base md:text-lg text-black leading-relaxed mb-8" style="color: #000000 !important;">
                  Pickleball will be a vibrant and popular sport in Malaysia that contributes towards nation building and social development by reaching out to all Malaysians in its pursuit of glory for the country.
                </p>
                
                <h3 class="text-3xl md:text-4xl font-bold mb-6 text-gray-800" style="font-style: italic; color: #000000 !important;">
                  Objective
                </h3>
                <p class="text-base md:text-lg text-black leading-relaxed" style="color: #000000 !important;">
                  To establish Malaysia as a leading pickleball nation through comprehensive development programs, world-class facilities, and excellence in international competitions while promoting the sport as an inclusive activity for all Malaysians.
                </p>
              </div>

              <!-- Mission -->
              <div class="text-center lg:text-left lg:pl-8">
                <h3 class="text-3xl md:text-4xl font-bold mb-6 text-gray-800" style="font-style: italic; color: #000000 !important;">
                  Mission
                </h3>
                <div class="space-y-4 text-sm md:text-base text-black">
                  <div class="flex items-start justify-center lg:justify-start space-x-4">
                    <div class="w-2 h-2 bg-blue-600 rounded-full mt-2 flex-shrink-0"></div>
                    <p class="text-left" style="color: #000000 !important;">To inspire and unite Malaysians through pickleball, promoting an active lifestyle for all.</p>
                  </div>
                  <div class="flex items-start justify-center lg:justify-start space-x-4">
                    <div class="w-2 h-2 bg-blue-600 rounded-full mt-2 flex-shrink-0"></div>
                    <p class="text-left" style="color: #000000 !important;">To develop a strong pipeline of talented players and coaches to elevate the sport nationally.</p>
                  </div>
                  <div class="flex items-start justify-center lg:justify-start space-x-4">
                    <div class="w-2 h-2 bg-blue-600 rounded-full mt-2 flex-shrink-0"></div>
                    <p class="text-left" style="color: #000000 !important;">To host world-class tournaments that showcase Malaysia's growing pickleball prowess.</p>
                  </div>
                  <div class="flex items-start justify-center lg:justify-start space-x-4">
                    <div class="w-2 h-2 bg-blue-600 rounded-full mt-2 flex-shrink-0"></div>
                    <p class="text-left" style="color: #000000 !important;">To build accessible training facilities across states to support grassroots growth.</p>
                  </div>
                  <div class="flex items-start justify-center lg:justify-start space-x-4">
                    <div class="w-2 h-2 bg-blue-600 rounded-full mt-2 flex-shrink-0"></div>
                    <p class="text-left" style="color: #000000 !important;">To establish pickleball as a leading sport, reflecting national pride and excellence.</p>
                  </div>
                </div>
              </div>

            </div>
          </div>
          
          
        </div>
      </div>
    </section>


    <!-- React Content Section -->
    <section class="py-16 relative overflow-hidden">
      <!-- Enhanced Background Effects -->
      <div class="absolute inset-0">
        <!-- Removed blur effects and gradient overlay -->
      </div>
      
      <!-- Content Container -->
      <div class="container mx-auto px-4 relative z-10">
        <div class="max-w-7xl mx-auto">
          
          <!-- Statistics Section -->
          <div class="mb-8">
            <div class="text-center mb-8">
              <h2 class="text-4xl font-bold text-gray-800 mb-2">Quick Stats</h2>
              <div class="w-20 h-1 bg-gradient-to-r from-blue-400 to-green-400 rounded-full mx-auto"></div>
            </div>
            <% var QS = (typeof quickStats !== 'undefined' && quickStats) ? quickStats : { players: 0, tournaments: 0, venues: 0, coaches: 0 }; %>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
              <div class="bg-white rounded-xl p-6 shadow-lg border border-gray-200/50 text-center">
                <div class="flex items-center justify-center mb-2">
                  <span class="text-2xl font-bold text-gray-900"><%= QS.players %></span>
                  <span class="text-lg font-bold bg-gradient-to-r from-green-400 to-blue-400 bg-clip-text text-transparent">+</span>
                </div>
                <h3 class="text-sm font-semibold text-gray-900 mb-1">Active Players</h3>
                <p class="text-gray-700 text-xs">Registered members</p>
              </div>
              <div class="bg-white rounded-xl p-6 shadow-lg border border-gray-200/50 text-center">
                <div class="flex items-center justify-center mb-2">
                  <span class="text-2xl font-bold text-gray-900"><%= QS.tournaments %></span>
                  <span class="text-lg font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">+</span>
                </div>
                <h3 class="text-sm font-semibold text-gray-900 mb-1">Tournaments</h3>
                <p class="text-gray-700 text-xs">Annual events</p>
              </div>
              <div class="bg-white rounded-xl p-6 shadow-lg border border-gray-200/50 text-center">
                <div class="flex items-center justify-center mb-2">
                  <span class="text-2xl font-bold text-gray-900"><%= QS.venues %></span>
                  <span class="text-lg font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">+</span>
                </div>
                <h3 class="text-sm font-semibold text-gray-900 mb-1">Venues</h3>
                <p class="text-gray-700 text-xs">Across Malaysia</p>
              </div>
              <div class="bg-white rounded-xl p-6 shadow-lg border border-gray-200/50 text-center">
                <div class="flex items-center justify-center mb-2">
                  <span class="text-2xl font-bold text-gray-900"><%= QS.coaches %></span>
                  <span class="text-lg font-bold bg-gradient-to-r from-pink-400 to-red-400 bg-clip-text text-transparent">+</span>
                </div>
                <h3 class="text-sm font-semibold text-gray-900 mb-1">Coaches</h3>
                <p class="text-gray-700 text-xs">Certified trainers</p>
              </div>
            </div>
            
            <!-- Data Attribution -->
            <div class="text-center mt-6">
              <img src="/images/courtsite.svg" alt="Courtsite" class="h-12 mx-auto opacity-80">
            </div>
          </div>



          <!-- Guidelines Section -->
          <div class="mb-12">
            <div class="text-center mb-8">
              <h2 class="text-4xl font-bold text-gray-800 mb-2">Guidelines</h2>
              <div class="w-20 h-1 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full mx-auto"></div>
              <p class="text-gray-600 mt-4 max-w-2xl mx-auto">Essential guidelines for players, venues, and clubs to ensure fair play and professional standards</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
              <!-- Tournament Guideline -->
              <div class="group bg-white rounded-xl p-8 shadow-lg border border-gray-200/50 hover:shadow-xl transition-all duration-300 hover:scale-105 flex flex-col h-full">
                <div class="text-center mb-6">
                  <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-trophy text-white text-2xl"></i>
                  </div>
                  <h3 class="text-2xl font-bold text-gray-800 mb-2">Tournament Guidelines</h3>
                  <div class="w-12 h-1 bg-gradient-to-r from-blue-400 to-blue-600 rounded-full mx-auto"></div>
                </div>
                <div class="space-y-4 flex-1">
                  <div class="flex items-start space-x-3">
                    <i class="fas fa-check-circle text-blue-500 mt-1"></i>
                    <p class="text-gray-700">Application methods for local & international sports events</p>
                  </div>
                  <div class="flex items-start space-x-3">
                    <i class="fas fa-check-circle text-blue-500 mt-1"></i>
                    <p class="text-gray-700">Licensing requirements for companies & organizations</p>
                  </div>
                  <div class="flex items-start space-x-3">
                    <i class="fas fa-check-circle text-blue-500 mt-1"></i>
                    <p class="text-gray-700">Bidding procedures for international events</p>
                  </div>
                  <div class="flex items-start space-x-3">
                    <i class="fas fa-check-circle text-blue-500 mt-1"></i>
                    <p class="text-gray-700">Legal compliance under Sports Development Act 1997</p>
                  </div>
                </div>
                <div class="mt-6 flex justify-center">
                  <a href="/services/tournament-guidelines" class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-300 group-hover:scale-105">
                    <span class="mr-2">Read Guidelines</span>
                    <i class="fas fa-arrow-right"></i>
                  </a>
                </div>
              </div>

              <!-- Venue Guideline -->
              <div class="group bg-white rounded-xl p-8 shadow-lg border border-gray-200/50 hover:shadow-xl transition-all duration-300 hover:scale-105 flex flex-col h-full">
                <div class="text-center mb-6">
                  <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-map-marker-alt text-white text-2xl"></i>
                  </div>
                  <h3 class="text-2xl font-bold text-gray-800 mb-2">Venue Guidelines</h3>
                  
                  <div class="w-12 h-1 bg-gradient-to-r from-green-400 to-green-600 rounded-full mx-auto"></div>
                </div>
                <div class="space-y-4 flex-1">
                  <div class="flex items-start space-x-3">
                    <i class="fas fa-check-circle text-green-500 mt-1"></i>
                    <p class="text-gray-700">Court specifications and dimensions</p>
                  </div>
                  <div class="flex items-start space-x-3">
                    <i class="fas fa-check-circle text-green-500 mt-1"></i>
                    <p class="text-gray-700">Safety standards and requirements</p>
                  </div>
                  <div class="flex items-start space-x-3">
                    <i class="fas fa-check-circle text-green-500 mt-1"></i>
                    <p class="text-gray-700">Facility management protocols</p>
                  </div>
                  <div class="flex items-start space-x-3">
                    <i class="fas fa-check-circle text-green-500 mt-1"></i>
                    <p class="text-gray-700">Booking and reservation procedures</p>
                  </div>
                </div>
                <div class="mt-6 flex justify-center">
                  <a href="/services/venue-guidelines" class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:from-green-600 hover:to-green-700 transition-all duration-300 group-hover:scale-105">
                    <span class="mr-2">Read Guidelines</span>
                    <i class="fas fa-arrow-right"></i>
                  </a>
                </div>
              </div>

              <!-- Club Guideline -->
              <div class="group bg-white rounded-xl p-8 shadow-lg border border-gray-200/50 hover:shadow-xl transition-all duration-300 hover:scale-105 flex flex-col h-full">
                <div class="text-center mb-6">
                  <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-users text-white text-2xl"></i>
                  </div>
                  <h3 class="text-2xl font-bold text-gray-800 mb-2">Club Guidelines</h3>
                  <div class="bg-red-100 border border-red-300 text-red-700 px-3 py-1 rounded-lg text-center mb-3">
                    <span class="font-semibold text-sm">Coming Soon</span>
                  </div>
                  <div class="w-12 h-1 bg-gradient-to-r from-purple-400 to-purple-600 rounded-full mx-auto"></div>
                </div>
                <div class="space-y-4 flex-1">
                  <div class="flex items-start space-x-3">
                    <i class="fas fa-check-circle text-purple-500 mt-1"></i>
                    <p class="text-gray-700">Club registration and certification</p>
                  </div>
                  <div class="flex items-start space-x-3">
                    <i class="fas fa-check-circle text-purple-500 mt-1"></i>
                    <p class="text-gray-700">Membership management standards</p>
                  </div>
                  <div class="flex items-start space-x-3">
                    <i class="fas fa-check-circle text-purple-500 mt-1"></i>
                    <p class="text-gray-700">Training and coaching protocols</p>
                  </div>
                  <div class="flex items-start space-x-3">
                    <i class="fas fa-check-circle text-purple-500 mt-1"></i>
                    <p class="text-gray-700">Event organization guidelines</p>
                  </div>
                </div>
                <div class="mt-6 flex justify-center">
                  <a href="/services/club-guidelines" class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-medium rounded-lg hover:from-purple-600 hover:to-purple-700 transition-all duration-300 group-hover:scale-105">
                    <span class="mr-2">Read Guidelines</span>
                    <i class="fas fa-arrow-right"></i>
                  </a>
                </div>
              </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex flex-col sm:flex-row gap-4 justify-center items-center mt-10">
              <a href="https://docs.google.com/forms/d/e/1FAIpQLSf6Cq0KAlWQf3ELfJecHgO2ox5OWkui2BB2TvOR_7Oh3b-7eA/viewform?usp=header" class="inline-flex items-center px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-700 text-white font-bold rounded-xl hover:from-blue-700 hover:to-indigo-800 transition-all duration-300 hover:scale-105 shadow-lg group">
                <i class="fas fa-map-marker-alt mr-3 text-xl"></i>
                <span class="text-lg">Register Tournament</span>
                <i class="fas fa-arrow-right ml-3 transition-transform duration-300 group-hover:translate-x-1"></i>
              </a>
            </div>
          </div>

          <!-- Horizontal Scroll Timeline Section -->
          <section class="timeline-section relative mb-12" id="timelineSection">
            <!-- Section Header -->
            <div class="text-center mb-8">
              <h2 class="text-4xl font-bold text-gray-800 mb-2">Our Journey</h2>
              <div class="w-20 h-1 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full mx-auto"></div>
              <p class="text-gray-600 mt-4 max-w-2xl mx-auto">Scroll horizontally to explore key milestones and achievements</p>
            </div>
            
            <!-- Horizontal Timeline Container -->
            <div class="timeline-horizontal-container" id="timelineContainer">
              <!-- Timeline Wrapper -->
              <div class="timeline-wrapper" id="timelineWrapper">
                <!-- Milestones will be loaded here -->
              </div>
            </div>
            
            <!-- Loading State -->
            <div id="milestonesLoading" class="text-center py-12">
              <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-600 mx-auto mb-4"></div>
              <p class="text-gray-600">Loading milestones...</p>
            </div>
            
            <!-- Empty State -->
            <div id="milestonesEmpty" class="text-center py-12 hidden">
              <i class="fas fa-flag-checkered text-6xl text-gray-300 mb-4"></i>
              <h3 class="text-xl font-semibold text-gray-600 mb-2">No milestones available</h3>
              <p class="text-gray-400">Check back soon for updates on our journey!</p>
            </div>
            
            <!-- Scroll Indicator -->
            <div class="text-center mt-4">
              <div class="flex items-center justify-center text-gray-500">
                <i class="fas fa-arrows-alt-h text-xl mr-2"></i>
                <p class="text-sm font-medium">Scroll horizontally to explore timeline</p>
              </div>
            </div>
          </section>

          <!-- News and Videos Grid -->
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-12 md:gap-8 gap-6">
            
            <!-- Latest News Section -->
            <div class="news-section w-full">
              <div class="flex items-center justify-between mb-8 md:mb-6 mb-4">
                <div>
                  <h2 class="text-4xl font-bold text-gray-800 mb-2">Latest News</h2>
                  <div class="w-20 h-1 bg-gradient-to-r from-green-400 to-blue-400 rounded-full"></div>
                </div>
                <div class="flex items-center space-x-4">
                  <a href="/news" class="text-green-400 hover:text-green-300 font-medium flex items-center transition-all duration-300 hover:scale-105 group">
                    <span class="mr-2">View All</span>
                    <i class="fas fa-arrow-right transition-transform duration-300 group-hover:translate-x-1"></i>
                  </a>
                </div>
              </div>
              
              <!-- Auto-scroll News Cards Container -->
              <div class="news-carousel-container relative overflow-hidden w-full">
                <div id="latestNewsContainer" class="news-carousel flex transition-transform duration-500 ease-in-out w-full"></div>
              </div>
            </div>

            <!-- Video Section -->
            <div class="video-section w-full">
              <div class="flex items-center justify-between mb-8 md:mb-6 mb-4">
                <div>
                  <h2 class="text-4xl font-bold text-gray-800 mb-2">Featured Videos</h2>
                  <div class="w-20 h-1 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full"></div>
                </div>
                <div class="flex items-center">
                  <a href="/videos" class="text-green-400 hover:text-green-300 font-medium flex items-center transition-all duration-300 hover:scale-105 group">
                    <span class="mr-2">View All</span>
                    <i class="fas fa-arrow-right transition-transform duration-300 group-hover:translate-x-1"></i>
                  </a>
                </div>
              </div>
              <!-- Video List Container -->
              <div class="video-list-container">
                <div id="featuredVideosContainer" class="space-y-6">
                  <% if (video1 && video1 !== 'null' && video1 !== 'Null') { %>
                    <div class="video-item w-full mb-6">
                      <div class="bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-200 hover:shadow-xl transition-all duration-300">
                        <div class="relative h-48 bg-gray-100 overflow-hidden">
                          <%- video1 ? video1.replace(/sandbox="[^"]*"/g, 'sandbox="allow-scripts allow-same-origin allow-presentation allow-forms"').replace(/frameborder="0"/g, 'frameborder="0" loading="lazy"') : '' %>
                        </div>
                        <div class="p-4">
                          <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                              <div class="w-8 h-8 bg-gradient-to-br from-red-500 to-pink-500 rounded-lg flex items-center justify-center shadow-lg">
                                <i class="fas fa-play text-white text-sm"></i>
                              </div>
                              <div>
                                <h3 class="font-bold text-gray-800 text-sm group-hover:text-green-600 transition-colors"><%= video1Type %></h3>
                                <p class="text-xs text-gray-600">Pickleball Content</p>
                              </div>
                            </div>
                            <div class="flex items-center space-x-1 bg-red-500/20 px-2 py-1 rounded-full border border-red-400/30">
                              <i class="fab fa-youtube text-red-500 text-xs"></i>
                              <span class="text-xs font-medium text-red-600">YouTube</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  <% } %>

                  <% if (video2 && video2 !== 'null' && video2 !== 'Null') { %>
                    <div class="video-item w-full mb-6">
                      <div class="bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-200 hover:shadow-xl transition-all duration-300">
                        <div class="relative h-48 bg-gray-100 overflow-hidden">
                          <%- video2 ? video2.replace(/sandbox="[^"]*"/g, 'sandbox="allow-scripts allow-same-origin allow-presentation allow-forms"').replace(/frameborder="0"/g, 'frameborder="0" loading="lazy"') : '' %>
                        </div>
                        <div class="p-4">
                          <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                              <div class="w-8 h-8 bg-gradient-to-br from-red-500 to-pink-500 rounded-lg flex items-center justify-center shadow-lg">
                                <i class="fas fa-play text-white text-sm"></i>
                              </div>
                              <div>
                                <h3 class="font-bold text-gray-900 text-sm group-hover:text-green-600 transition-colors"><%= video2Type %></h3>
                                <p class="text-xs text-gray-800">Pickleball Content</p>
                              </div>
                            </div>
                            <div class="flex items-center space-x-1 bg-red-500/20 px-2 py-1 rounded-full border border-red-400/30">
                              <i class="fab fa-youtube text-red-500 text-xs"></i>
                              <span class="text-xs font-medium text-red-600">YouTube</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  <% } %>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Upcoming Tournaments Section -->
    <section class="py-16 relative overflow-hidden">
      <div class="absolute inset-0 bg-gradient-to-br from-green-900/10 via-blue-900/5 to-purple-900/10"></div>
      <div class="container mx-auto px-4 relative z-10">
        <div class="max-w-7xl mx-auto">
          <div class="text-center mb-12">
            <h2 class="text-4xl font-bold text-gray-800 mb-4">Upcoming Tournaments</h2>
            <div class="w-20 h-1 bg-gradient-to-r from-green-400 to-blue-400 rounded-full mx-auto"></div>
            <p class="text-gray-600 mt-4">Don't miss these exciting pickleball events coming up!</p>
          </div>
          
          <div id="upcomingTournamentsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"></div>

          <div class="text-center mt-8">
            <a href="/tournament" class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-green-500 to-blue-600 text-white font-medium rounded-lg hover:from-green-600 hover:to-blue-700 transition-all duration-300 hover:scale-105">
              <span class="mr-2">View All Tournaments</span>
              <i class="fas fa-arrow-right"></i>
            </a>
          </div>
        </div>
      </div>
    </section>



    <div class="container mx-auto px-4 space-y-16">
      <!-- Additional content can be added here -->
    </div>
  </main>
  
  <%- include('../partials/footer') %>
  
  <!-- Professional Popup Modal -->
  <% if (popupMessage && popupMessage.active) { %>
  <div id="popup-modal" class="popup-modal fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 opacity-0 transition-opacity duration-300 backdrop-blur-sm">
    <div class="popup-content bg-white rounded-3xl shadow-2xl max-w-md w-full mx-4 transform scale-95 transition-transform duration-300 border border-gray-100">
      <div class="relative">
        <!-- Close Button -->
        <button id="close-popup" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-xl font-bold z-10 transition-colors duration-200">
          <i class="fas fa-times"></i>
        </button>
        
        <!-- Image Section with Better Sizing -->
        <% if (popupMessage.image) { %>
        <div class="w-full h-48 bg-gradient-to-br from-green-50 to-blue-50 rounded-t-3xl overflow-hidden relative">
          <img src="<%= popupMessage.image %>" alt="Welcome to Malaysia Pickleball Association" class="w-full h-full object-contain p-4 lazy-load" loading="lazy">
          <!-- Overlay for better text visibility -->
          <div class="absolute inset-0 bg-gradient-to-t from-white/20 to-transparent"></div>
        </div>
        <% } %>
        
        <!-- Content Section -->
        <div class="p-8">
          <% if (popupMessage.title) { %>
          <div class="text-center mb-6">
            <h2 class="text-3xl font-bold text-gray-800 mb-2"><%= popupMessage.title %></h2>
            <div class="w-16 h-1 bg-gradient-to-r from-green-400 to-blue-400 rounded-full mx-auto"></div>
          </div>
          <% } %>
          
          <% if (popupMessage.content) { %>
          <div class="text-center mb-8">
            <p class="text-gray-600 text-lg leading-relaxed"><%= popupMessage.content %></p>
          </div>
          <% } %>
          
          <!-- Professional Button -->
          <div class="flex justify-center">
            <button id="popup-ok-btn" class="bg-gradient-to-r from-green-500 to-blue-600 text-white px-8 py-3 rounded-xl hover:from-green-600 hover:to-blue-700 font-semibold text-lg transition-all duration-300 hover:scale-105 shadow-lg">
              <i class="fas fa-check mr-2"></i>
              Welcome to MPA
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <% } %>
  
  <script>
    // Optimized lazy loading
    document.addEventListener('DOMContentLoaded', function() {
      const lazyImages = document.querySelectorAll('.lazy-load');
      
      if ('IntersectionObserver' in window) {
        const imageObserver = new IntersectionObserver((entries, observer) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              const img = entry.target;
              img.classList.add('loaded');
              observer.unobserve(img);
            }
          });
        });
        
        lazyImages.forEach(img => imageObserver.observe(img));
      } else {
        // Fallback for older browsers
        lazyImages.forEach(img => img.classList.add('loaded'));
      }
      
      // Optimize popup modal
      const popupModal = document.getElementById('popup-modal');
      const closePopup = document.getElementById('close-popup');
      const popupOk = document.getElementById('popup-ok-btn');
      
      if (popupModal) {
        // Show popup with optimized animation
        setTimeout(() => {
          popupModal.style.opacity = '1';
          popupModal.querySelector('.popup-content').style.transform = 'scale(1)';
        }, 100);
        
        // Close popup handlers
        const closeHandler = () => {
          popupModal.style.opacity = '0';
          popupModal.querySelector('.popup-content').style.transform = 'scale(0.95)';
          setTimeout(() => popupModal.remove(), 300);
        };
        
        if (closePopup) closePopup.addEventListener('click', closeHandler);
        if (popupOk) popupOk.addEventListener('click', closeHandler);
        
        // Close on backdrop click
        popupModal.addEventListener('click', (e) => {
          if (e.target === popupModal) closeHandler();
        });
      }
    });
  </script>
  
  <script src="/js/script.js"></script>
  <script src="/js/home.js"></script>
  
  <!-- Enhanced Content Section - Vanilla JavaScript (CSP Compliant) -->
  <script>
    console.log('🎯 Loading enhanced content section...');
    
    // News data
    const newsData = [
      {
        title: "Malaysia Pickleball Championship 2025",
        description: "Join the biggest pickleball tournament in Malaysia. Register now for early bird pricing and experience world-class competition with international players.",
        date: "31/07/2025",
        badge: "ANNOUNCEMENT",
        size: "col-span-2 row-span-3",
        bgClass: "bg-gradient-to-br from-green-500 via-blue-600 to-purple-600"
      },
      {
        title: "New Coaching Program Launch",
        description: "Professional coaching now available in KL and Selangor areas with certified instructors. Book your sessions today.",
        date: "2 days ago",
        size: "col-span-1 row-span-2",
        bgClass: "bg-gradient-to-br from-blue-500 via-purple-600 to-pink-500"
      },
      {
        title: "Sarawak Open Results",
        description: "Congratulations to all participants in the recent Sarawak tournament with record participation from across Malaysia.",
        date: "5 days ago",
        size: "col-span-1 row-span-2",
        bgClass: "bg-gradient-to-br from-yellow-500 via-orange-500 to-red-500"
      }
    ];

    // Create a news card element
    function createNewsCard(news, index) {
      const card = document.createElement('div');
      card.className = `${news.size} ${news.bgClass} rounded-2xl overflow-hidden shadow-2xl cursor-pointer border border-white/20 backdrop-blur-lg transition-all duration-500 hover:scale-105 hover:shadow-3xl group news-card`;
      card.dataset.index = index;
      
             card.innerHTML = `
         <div class="relative h-full p-8 flex flex-col justify-end">
           <div class="absolute inset-0 bg-gradient-to-t from-white/95 via-white/80 to-transparent"></div>
           <div class="absolute inset-0 bg-cover bg-center opacity-10 transition-opacity duration-500" style="background-image: url('/images/pic${index + 1}.png');"></div>
           
           <!-- Animated background particles -->
           <div class="absolute inset-0 overflow-hidden">
             <div class="particle-1 absolute w-2 h-2 bg-blue-500/30 rounded-full animate-ping opacity-0 transition-opacity duration-500" style="top: 20%; left: 80%; animation-delay: 0.5s;"></div>
             <div class="particle-2 absolute w-1 h-1 bg-green-500/30 rounded-full animate-ping opacity-0 transition-opacity duration-500" style="top: 60%; left: 10%; animation-delay: 1s;"></div>
           </div>
           
           <div class="relative z-10">
             ${news.badge ? `<span class="inline-block px-2 py-1 bg-gradient-to-r from-red-500 to-pink-500 text-white text-xs font-bold rounded-full mb-2 shadow-lg animate-pulse">${news.badge}</span>` : ''}
             <h3 class="text-lg font-bold text-gray-900 mb-3 group-hover:text-blue-600 transition-colors duration-300 line-clamp-2">${news.title}</h3>
             <p class="text-gray-800 text-sm mb-3 opacity-90 line-clamp-3 leading-relaxed">${news.description}</p>
             <div class="flex items-center justify-between">
               <div class="flex items-center text-gray-700 text-xs">
                 <i class="fas fa-calendar mr-1"></i>
                 <span>${news.date}</span>
               </div>
               <div class="flex items-center text-green-600 text-xs font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                 <span class="text-xs">Read More</span>
                 <i class="fas fa-arrow-right ml-1"></i>
               </div>
             </div>
           </div>
         </div>
       `;
      
      return card;
    }

    // Create a video card element
    function createVideoCard(video, isMain = false) {
      const card = document.createElement('div');
      card.className = `video-container group h-64 transition-all duration-500 hover:scale-105`;
      
      if (isMain) {
        card.innerHTML = `
          <div class="bg-gradient-to-br from-white/90 to-gray-100/90 backdrop-blur-lg rounded-2xl shadow-2xl overflow-hidden border border-gray-200/50 h-full hover:bg-gradient-to-br hover:from-white/95 hover:to-gray-50/95 transition-all duration-500">
            <div class="relative h-48 bg-gray-100 overflow-hidden">
              <div id="video-embed-1"></div>
              <div class="absolute inset-0 bg-gradient-to-t from-white/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            </div>
            <div class="p-4">
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                  <div class="w-8 h-8 bg-gradient-to-br from-red-500 to-pink-500 rounded-lg flex items-center justify-center shadow-lg">
                    <i class="fas fa-play text-white text-sm"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-800 text-sm group-hover:text-green-600 transition-colors">${video.title}</h3>
                    <p class="text-xs text-gray-600">Pickleball Content</p>
                  </div>
                </div>
                <div class="flex items-center space-x-1 bg-red-500/20 px-2 py-1 rounded-full border border-red-400/30">
                  <i class="fab fa-youtube text-red-500 text-xs"></i>
                  <span class="text-xs font-medium text-red-600">YouTube</span>
                </div>
              </div>
            </div>
          </div>
        `;
        
        // Insert the embed code properly
        const embedContainer = card.querySelector('#video-embed-1');
        if (video.embed && video.embed !== 'Null') {
          embedContainer.innerHTML = video.embed;
        } else {
          embedContainer.innerHTML = `
            <div class="flex items-center justify-center h-full bg-gradient-to-br from-blue-100/50 to-purple-100/50">
              <div class="text-center">
                <div class="w-16 h-16 bg-gradient-to-br from-red-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-3 shadow-lg hover:shadow-2xl transition-shadow duration-300">
                  <i class="fas fa-play text-white text-xl"></i>
                </div>
                <h3 class="font-bold text-gray-900 mb-1">${video.title}</h3>
                <p class="text-gray-800 text-sm">Click to watch</p>
              </div>
            </div>
          `;
        }
      } else {
        card.innerHTML = `
          <div class="bg-gradient-to-br from-white/90 to-gray-100/90 backdrop-blur-lg rounded-2xl shadow-2xl overflow-hidden border border-gray-200/50 h-full hover:bg-gradient-to-br hover:from-white/95 hover:to-gray-50/95 transition-all duration-500">
            <div class="relative h-48 bg-gray-100 overflow-hidden">
              <div id="video-embed-2"></div>
              <div class="absolute inset-0 bg-gradient-to-t from-white/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            </div>
            <div class="p-4">
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                  <div class="w-8 h-8 bg-gradient-to-br from-red-500 to-pink-500 rounded-lg flex items-center justify-center shadow-lg">
                    <i class="fas fa-play text-white text-sm"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900 text-sm group-hover:text-green-600 transition-colors">${video.title}</h3>
                    <p class="text-xs text-gray-800">Pickleball Content</p>
                  </div>
                </div>
                <div class="flex items-center space-x-1 bg-red-500/20 px-2 py-1 rounded-full border border-red-400/30">
                  <i class="fab fa-youtube text-red-500 text-xs"></i>
                  <span class="text-xs font-medium text-red-600">YouTube</span>
                </div>
              </div>
            </div>
          </div>
        `;
        
        // Insert the embed code properly
        const embedContainer = card.querySelector('#video-embed-2');
        if (video.embed && video.embed !== 'Null') {
          embedContainer.innerHTML = video.embed;
        } else {
          embedContainer.innerHTML = `
            <div class="flex items-center justify-center h-full bg-gradient-to-br from-green-100/50 to-blue-100/50">
              <div class="text-center">
                <div class="w-16 h-16 bg-gradient-to-br from-red-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-3 shadow-lg hover:shadow-2xl transition-shadow duration-300">
                  <i class="fas fa-play text-white text-xl"></i>
                </div>
                <h3 class="font-bold text-gray-800 mb-1">${video.title}</h3>
                <p class="text-gray-600 text-sm">Click to watch</p>
              </div>
            </div>
          `;
        }
      }
      
      return card;
    }

    // Removed duplicate content initialization code

    // Setup event listeners for the actual existing news section
    function setupEventListeners() {
      const container = document.querySelector('.news-section');
      if (!container) return;
      // Comprehensive image error handler for news images
      window.handleNewsImgError = function(img){
        try {
          const orig = img.getAttribute('data-orig') || img.src || '';
          const currentRetry = img.dataset.retry || 'initial';
          
          console.log(`🖼️ Image error for: ${img.src}, original: ${orig}, retry: ${currentRetry}`);
          
          // Extract just the filename from various path formats
          let filename = orig;
          if (filename.includes('/')) {
            filename = filename.split('/').pop();
          }
          
          // Try different paths in sequence
          switch (currentRetry) {
            case 'initial':
              // First try: /uploads/filename (most common location)
              img.dataset.retry = 'uploads';
              img.src = `/uploads/${filename}`;
              console.log(`🔄 Trying uploads path: /uploads/${filename}`);
              return;
              
            case 'uploads':
              // Second try: /uploads/news/filename
              img.dataset.retry = 'news';
              img.src = `/uploads/news/${filename}`;
              console.log(`🔄 Trying news path: /uploads/news/${filename}`);
              return;
              
            case 'news':
              // Third try: /images/news/filename
              img.dataset.retry = 'images-news';
              img.src = `/images/news/${filename}`;
              console.log(`🔄 Trying images/news path: /images/news/${filename}`);
              return;
              
            case 'images-news':
              // Fourth try: /images/filename
              img.dataset.retry = 'images';
              img.src = `/images/${filename}`;
              console.log(`🔄 Trying images path: /images/${filename}`);
              return;
              
            default:
              // Final fallback: default background
              console.log(`❌ All paths failed, using default image`);
              img.onerror = null;
              img.src = '/images/defaultbg.png';
              break;
          }
        } catch(error) {
          console.error('Image error handler failed:', error);
          img.onerror = null;
          img.src = '/images/defaultbg.png';
        }
      };
      
      // News card hover effects
      container.addEventListener('mouseenter', function(e) {
        if (e.target.closest('.news-card')) {
          const card = e.target.closest('.news-card');
          const particles = card.querySelectorAll('.particle-1, .particle-2');
          particles.forEach(particle => {
            particle.classList.remove('opacity-0');
            particle.classList.add('opacity-100');
          });
        }
      }, true);

      container.addEventListener('mouseleave', function(e) {
        if (e.target.closest('.news-card')) {
          const card = e.target.closest('.news-card');
          const particles = card.querySelectorAll('.particle-1, .particle-2');
          particles.forEach(particle => {
            particle.classList.remove('opacity-100');
            particle.classList.add('opacity-0');
          });
        }
      }, true);
    }

    // Simple news loading function - FIXED
    async function loadLatestNews() {
      try {
        const container = document.getElementById('latestNewsContainer');
        if (!container) return;
        
        const response = await fetch('/api/news/latest?limit=3');
        const data = await response.json();
        
        if (data.success && data.news && data.news.length > 0) {
          container.innerHTML = '';
          
          data.news.forEach((article, index) => {
            const card = createNewsCard(article, index);
            if (card) container.appendChild(card);
          });
          
          // Simple auto-scroll for multiple articles
          if (data.news.length > 1) {
            let currentIndex = 0;
            setInterval(() => {
              currentIndex = (currentIndex + 1) % data.news.length;
              // Calculate scroll distance including gap
              const cardWidth = container.children[0].offsetWidth;
              const gap = 16; // 1rem gap
              const scrollLeft = currentIndex * (cardWidth + gap);
              container.scrollTo({ left: scrollLeft, behavior: 'smooth' });
            }, 4000);
          }
        } else {
          container.innerHTML = `
            <div class="text-center py-12">
              <i class="fas fa-newspaper text-6xl text-gray-300 mb-4"></i>
              <h3 class="text-xl font-semibold text-gray-500 mb-2">No news available</h3>
              <p class="text-gray-400">Check back soon for updates!</p>
            </div>
          `;
        }
      } catch (error) {
        const container = document.getElementById('latestNewsContainer');
        if (container) {
          container.innerHTML = `
            <div class="text-center py-12">
              <i class="fas fa-exclamation-triangle text-6xl text-yellow-400 mb-4"></i>
              <h3 class="text-xl font-semibold text-gray-500 mb-2">Unable to load news</h3>
              <p class="text-gray-400">Please try again later</p>
            </div>
          `;
        }
      }
    }
    
    // Create news card HTML
    function createNewsCard(article, index = 0) {
      const card = document.createElement('div');
      card.className = 'bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 latest-news-card';
      card.setAttribute('data-card-number', index + 1);
      
      // Force proper positioning and layout with inline styles for horizontal layout
      card.style.cssText = `
        position: static !important;
        display: block !important;
        width: 100% !important;
        height: 480px !important;
        margin: 0 !important;
        flex: 0 0 100% !important;
        float: none !important;
        box-sizing: border-box !important;
      `;
      
      function normalizeImageUrl(url){
        if (!url) return null;
        
        // If it's already a full URL or starts with /, use as-is
        if (/^https?:\/\//i.test(url) || url.startsWith('/')) return url;
        
        // For relative paths, try the uploads directory first (where server saves them)
        // The error handler will try other paths if this fails
        return `/uploads/${url}`;
      }
      const imageUrl = normalizeImageUrl(article.featuredImage);
      const mediaHtml = imageUrl 
        ? `<img src="${imageUrl}" alt="${article.title}" class="w-full h-56 md:h-52 object-cover" data-orig="${article.featuredImage || ''}" onerror="handleNewsImgError(this)">`
        : article.featuredVideo
        ? `<video src="${article.featuredVideo}" class="w-full h-56 md:h-52 object-cover" muted></video>`
        : `<div class="w-full h-56 md:h-52 bg-gradient-to-br from-blue-100 to-purple-100 flex items-center justify-center">
             <i class="fas fa-newspaper text-4xl text-blue-400"></i>
           </div>`;
      
      const categoryColors = {
        'tournament': 'bg-blue-100 text-blue-800',
        'announcement': 'bg-red-100 text-red-800',
        'general': 'bg-gray-100 text-gray-800',
        'achievement': 'bg-green-100 text-green-800',
        'event': 'bg-purple-100 text-purple-800'
      };
      
      const categoryColor = categoryColors[article.category] || categoryColors.general;
      const publishDate = new Date(article.publishedAt || article.createdAt).toLocaleDateString('en-GB');
      
      card.innerHTML = `
        ${mediaHtml}
        <div class="p-6 pb-12">
          <div class="flex items-center justify-between mb-3">
            <span class="px-3 py-1 rounded-full text-xs font-medium ${categoryColor}">
              ${article.category.charAt(0).toUpperCase() + article.category.slice(1)}
            </span>
            <span class="text-sm text-gray-500">
              <i class="fas fa-calendar mr-1"></i>${publishDate}
            </span>
          </div>
          
          <h3 class="text-lg font-bold text-gray-800 mb-2 line-clamp-2">
            ${article.title}
          </h3>
          
          <p class="text-gray-600 text-xs md:text-sm mb-4 line-clamp-3 md:line-clamp-none leading-relaxed">
            ${article.summary ? article.summary : 
              article.content ? article.content.substring(0, 400) + '...' : 
              'Brief summary of this news article will appear here'}
          </p>
          
          <div class="flex items-center justify-between">
            <div class="flex items-center text-xs text-gray-500">
              <i class="fas fa-user mr-1"></i>
              <span class="text-xs">${article.author}</span>
              <span class="mx-1">•</span>
              <i class="fas fa-eye mr-1"></i>
              <span class="text-xs">${article.viewCount || 0}</span>
            </div>
            
            <a href="/news/${article._id}" class="text-blue-600 hover:text-blue-800 font-medium text-xs">
              Read More <i class="fas fa-arrow-right ml-1"></i>
            </a>
          </div>
          
          ${article.featured && index !== 0 ? `
            <div class="mt-3 pt-3 border-t border-gray-100">
              <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-yellow-100 text-yellow-800">
                <i class="fas fa-star mr-1"></i>Featured
              </span>
            </div>
          ` : ''}
        </div>
      `;
      
      return card;
    }

    // Duplicate function removed - using the primary loadLatestNews function above

    // Simple auto-scroll carousel for latest news
    function attachNewsCarousel() {
      const carousel = document.getElementById('latestNewsContainer');
      
      if (!carousel) return;
      
      // Wait for cards to be loaded
      setTimeout(() => {
        const cards = Array.from(carousel.children);
        const count = cards.length;
        
        if (count <= 1) {
          console.log(`📰 Only ${count} news article found, no auto-scroll needed`);
          // Even with 1 article, make sure it's visible
          if (count === 1) {
            console.log('📰 Displaying single news article');
          }
          return;
        }
        
        console.log(`📰 ${count} news articles found, starting auto-scroll`);
        
        let index = 0;
        
        function stepWidth(){
          const containerWidth = carousel.clientWidth;
          console.log(`📏 Container width: ${containerWidth}px`);
          return containerWidth; // Scroll exactly one container width to show next card
        }
        
        function goTo(i){
          index = i;
          if (index >= count) index = 0; // jump back to start
          if (index < 0) index = count - 1; // jump to end
          const left = Math.round(index * stepWidth());
          console.log(`🎠 Scrolling to card ${index + 1}, scroll left: ${left}px`);
          carousel.scrollTo({ left, behavior: 'smooth' });
        }
        
        function next(){ goTo(index + 1); }
        
        // Auto-scroll functionality
        let timer; 
        function start(){ 
          stop(); 
          timer = setInterval(next, 4000); // Auto-scroll every 4 seconds
          console.log('🎠 News auto-scroll started');
        } 
        function stop(){ 
          if(timer) {
            clearInterval(timer);
            timer = null;
          }
        }
        
        // Pause on hover
        carousel.addEventListener('mouseenter', stop);
        carousel.addEventListener('mouseleave', start);
        
        // Initialize
        start();
        
        console.log(`🎠 News carousel initialized with ${count} articles and auto-scroll enabled`);
      }, 500); // Wait 500ms for cards to be fully rendered
    }

    // Initialize news carousel with auto-scroll
    function initializeNewsCarousel(newsCount) {
      if (newsCount <= 1) return; // No need for carousel with 1 or 0 items
      
      const carousel = document.getElementById('latestNewsContainer');
      const leftBtn = document.getElementById('newsScrollLeft');
      const rightBtn = document.getElementById('newsScrollRight');
      const indicators = document.getElementById('newsIndicators');
      
      let currentIndex = 0;
      let isScrolling = false;
      let autoScrollInterval;
      
      // Create indicator dots
      indicators.innerHTML = '';
      for (let i = 0; i < newsCount; i++) {
        const dot = document.createElement('button');
        dot.className = `w-3 h-3 rounded-full transition-all duration-300 ${i === 0 ? 'bg-blue-600' : 'bg-gray-300'}`;
        dot.addEventListener('click', () => scrollToIndex(i));
        indicators.appendChild(dot);
      }
      
      // Update indicator dots
      function updateIndicators() {
        const dots = indicators.children;
        for (let i = 0; i < dots.length; i++) {
          dots[i].className = `w-3 h-3 rounded-full transition-all duration-300 ${i === currentIndex ? 'bg-blue-600' : 'bg-gray-300'}`;
        }
      }
      
      // Scroll to specific index
      function scrollToIndex(index) {
        if (isScrolling) return;
        isScrolling = true;
        
        currentIndex = index;
        const scrollAmount = index * (480 + 24); // card width + margin (optimized for 5x2 layout)
        carousel.style.transform = `translateX(-${scrollAmount}px)`;
        updateIndicators();
        
        setTimeout(() => {
          isScrolling = false;
        }, 500);
      }
      
      // Navigate functions
      function nextSlide() {
        const nextIndex = (currentIndex + 1) % newsCount;
        scrollToIndex(nextIndex);
      }
      
      function prevSlide() {
        const nextIndex = (currentIndex - 1 + newsCount) % newsCount;
        scrollToIndex(nextIndex);
      }
      
      // Auto-scroll functionality
      function startAutoScroll() {
        autoScrollInterval = setInterval(nextSlide, 4000); // Change slide every 4 seconds
      }
      
      function stopAutoScroll() {
        clearInterval(autoScrollInterval);
      }
      
      // Event listeners
      leftBtn.addEventListener('click', () => {
        stopAutoScroll();
        prevSlide();
        setTimeout(startAutoScroll, 2000); // Restart auto-scroll after 2 seconds
      });
      
      rightBtn.addEventListener('click', () => {
        stopAutoScroll();
        nextSlide();
        setTimeout(startAutoScroll, 2000); // Restart auto-scroll after 2 seconds
      });
      
      // Pause auto-scroll on hover
      carousel.addEventListener('mouseenter', stopAutoScroll);
      carousel.addEventListener('mouseleave', startAutoScroll);
      
      // Start auto-scroll
      startAutoScroll();
      
      console.log(`🎠 News carousel initialized with ${newsCount} articles`);
    }

    // Initialize video list - no carousel functionality
    function initializeVideoList() {
      console.log('🎬 Video list loaded - no auto-scroll functionality');
    }

    // Load milestones for horizontal line timeline
    async function loadMilestones() {
      const wrapper = document.getElementById('timelineWrapper');
      const loading = document.getElementById('milestonesLoading');
      const empty = document.getElementById('milestonesEmpty');
      
      if (!wrapper) return;
      
      try {
        const response = await fetch('/api/milestones/published');
        const result = await response.json();
        
        loading.classList.add('hidden');
        
        if (result.success && result.milestones && result.milestones.length > 0) {
          // Sort milestones by date (oldest first for timeline)
          const sortedMilestones = result.milestones.sort((a, b) => new Date(a.date) - new Date(b.date));
          
          // Calculate wrapper width for horizontal scrolling
          const itemWidth = 420; // Fixed width per item
          const gap = 16; // 1rem gap in pixels
          const padding = 48; // 1.5rem padding on each side
          const totalWidth = (itemWidth * sortedMilestones.length * 2) + (gap * (sortedMilestones.length * 2 - 1)) + padding;
          wrapper.style.width = `${totalWidth}px`;
          
          // Create milestone HTML generator function
          function createMilestoneHTML(milestone, index) {
            const date = new Date(milestone.date);
            const formattedDate = date.toLocaleDateString('en-GB', {
              day: 'numeric',
              month: 'short',
              year: 'numeric'
            });
            
            return `
              <div class="timeline-item">
                <!-- Date above the line -->
                <div class="timeline-date">${formattedDate}</div>
                
                <!-- Timeline point/dot -->
                <div class="timeline-point"></div>
                
                <!-- Milestone content -->
                <div class="milestone-content">
                  ${milestone.image ? `
                    <img src="${milestone.image}" alt="${milestone.title}" 
                         onerror="this.outerHTML='<div class=\\'image-placeholder\\'>    <i class=\\'fas fa-flag-checkered\\'></i></div>'">
                  ` : `
                    <div class="image-placeholder">
                      <i class="fas fa-flag-checkered"></i>
                    </div>
                  `}
                  <div class="milestone-title">${milestone.title}</div>
                  <div class="milestone-description">${milestone.description}</div>
                </div>
              </div>
            `;
          }
          
          // Generate original milestones
          const originalMilestones = sortedMilestones.map(createMilestoneHTML).join('');
          // Duplicate milestones for seamless loop
          const duplicateMilestones = sortedMilestones.map(createMilestoneHTML).join('');
          
          // Combine original + duplicate for seamless infinite scrolling
          wrapper.innerHTML = originalMilestones + duplicateMilestones;
          
          // Initialize horizontal scroll timeline
          initializeHorizontalTimeline(sortedMilestones.length);
          empty.classList.add('hidden');
        } else {
          wrapper.innerHTML = '';
          empty.classList.remove('hidden');
        }
      } catch (error) {
        console.error('Error loading milestones:', error);
        loading.classList.add('hidden');
        wrapper.innerHTML = `
          <div class="text-center py-12 w-full">
            <i class="fas fa-exclamation-triangle text-6xl text-yellow-400 mb-4"></i>
            <h3 class="text-xl font-semibold text-gray-500 mb-2">Unable to load milestones</h3>
            <p class="text-gray-400">Please try again later</p>
          </div>
        `;
      }
    }

    // Initialize horizontal scroll timeline with smooth continuous auto-scroll
    function initializeHorizontalTimeline(milestonesCount) {
      if (milestonesCount <= 0) return;
      
      console.log(`🏆 Initializing smooth auto-scroll timeline with ${milestonesCount} milestones`);
      
      const timelineContainer = document.getElementById('timelineContainer');
      
      if (!timelineContainer) return;
      
      // Remove smooth scrolling behavior for continuous movement
      timelineContainer.style.scrollBehavior = 'auto';
      
      let autoScrollInterval;
      let isPaused = false;
      let scrollSpeed = 0.5; // pixels per frame (adjust for speed)
      let isUserScrolling = false;
      let userScrollTimeout;
      
      // Calculate halfway point (end of original milestones) for seamless loop
      function getHalfwayScrollWidth() {
        const itemWidth = 420;
        const gap = 16;
        const padding = 48;
        return (itemWidth * milestonesCount) + (gap * (milestonesCount - 1)) + (padding / 2);
      }
      
      // Continuous smooth auto-scroll
      function continuousAutoScroll() {
        if (isPaused || isUserScrolling) return;
        
        const halfwayPoint = getHalfwayScrollWidth();
        
        // Move scroll position by speed
        timelineContainer.scrollLeft += scrollSpeed;
        
        // Reset to beginning when reached halfway (end of original milestones) for seamless loop
        if (timelineContainer.scrollLeft >= halfwayPoint) {
          timelineContainer.scrollLeft = 0;
          console.log('🔄 Timeline seamless loop reset - no visual jump!');
        }
      }
      
      // Start continuous auto-scroll
      function startAutoScroll() {
        stopAutoScroll();
        autoScrollInterval = setInterval(continuousAutoScroll, 16); // ~60fps
        console.log('▶️ Smooth auto-scroll started');
      }
      
      // Stop auto-scroll
      function stopAutoScroll() {
        if (autoScrollInterval) {
          clearInterval(autoScrollInterval);
          autoScrollInterval = null;
        }
      }
      
      // Pause auto-scroll when user interacts
      function pauseAutoScroll() {
        isPaused = true;
        console.log('⏸️ Auto-scroll paused due to user interaction');
        
        // Resume after 3 seconds of no interaction
        setTimeout(() => {
          if (isPaused) {
            isPaused = false;
            console.log('▶️ Auto-scroll resumed');
          }
        }, 3000);
      }
      
      // Better user interaction detection
      timelineContainer.addEventListener('mousedown', () => {
        isUserScrolling = true;
        clearTimeout(userScrollTimeout);
        console.log('👆 User started manual scroll');
      });
      
      timelineContainer.addEventListener('scroll', (e) => {
        if (!isUserScrolling) {
          // This might be auto-scroll, check if it matches our speed
          return;
        }
        
        // Clear previous timeout
        clearTimeout(userScrollTimeout);
        
        // Set timeout to detect when user stops scrolling
        userScrollTimeout = setTimeout(() => {
          isUserScrolling = false;
          console.log('✋ User stopped scrolling, auto-scroll will resume');
        }, 1500); // Resume after 1.5 seconds of no scroll activity
      });
      
      timelineContainer.addEventListener('touchstart', () => {
        isUserScrolling = true;
        clearTimeout(userScrollTimeout);
        console.log('📱 User started touch scroll');
      });
      
      // Resume auto-scroll when user interaction ends
      timelineContainer.addEventListener('mouseleave', () => {
        setTimeout(() => {
          if (isUserScrolling) {
            isUserScrolling = false;
            console.log('🖱️ Mouse left, resuming auto-scroll');
          }
        }, 500);
      });
      
      // Adjust scroll speed based on screen size
      if (window.innerWidth <= 480) {
        scrollSpeed = 0.3; // Slower on mobile
      } else if (window.innerWidth <= 768) {
        scrollSpeed = 0.4; // Medium on tablet
      }
      
      // Start auto-scroll after initial delay
      setTimeout(startAutoScroll, 2000);
      
      console.log(`✅ Smooth auto-scroll timeline ready with ${milestonesCount} milestones - continuous infinite loop enabled`);
    }

    // Initialize when DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
      console.log('🚀 DOM loaded, initializing content...');
      
      // Check if news container exists
      const newsContainer = document.getElementById('latestNewsContainer');
      console.log('📦 News container exists:', !!newsContainer);
      
      // Add a delay to ensure DOM is fully ready
      setTimeout(() => {
        console.log('⏰ DOM ready timeout triggered');
        console.log('🔍 Checking if news container exists...');
        
        const newsContainer = document.getElementById('latestNewsContainer');
        if (newsContainer) {
          console.log('✅ News container exists, proceeding with setup');
          setupEventListeners();
          loadLatestNews();
          initializeVideoList();
        } else {
          console.error('❌ News container still not found after timeout, retrying...');
          // Retry after a longer delay
          setTimeout(() => {
            console.log('🔄 Retrying news loading...');
            loadLatestNews();
          }, 1000);
        }
        
        // Load milestones
        loadMilestones();
      }, 500); // Increased delay
    });
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2025 Tournament Calendar - Malaysia Pickleball Association</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Arial', sans-serif;
      line-height: 1.4;
      color: #333;
      background: white;
    }

    .pdf-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    .header {
      text-align: center;
      margin-bottom: 30px;
      border-bottom: 3px solid #667eea;
      padding-bottom: 20px;
    }

    .header h1 {
      font-size: 28px;
      color: #667eea;
      margin-bottom: 8px;
      font-weight: bold;
    }

    .header p {
      font-size: 14px;
      color: #666;
      margin-bottom: 10px;
    }

    .stats {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-top: 15px;
    }

    .stat-item {
      text-align: center;
    }

    .stat-number {
      font-size: 20px;
      font-weight: bold;
      color: #667eea;
    }

    .stat-label {
      font-size: 12px;
      color: #666;
      margin-top: 2px;
    }

    .legend {
      margin-bottom: 25px;
      background: #f8f9fa;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #e9ecef;
    }

    .legend h3 {
      font-size: 16px;
      margin-bottom: 12px;
      color: #333;
    }

    .legend-items {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      font-size: 12px;
    }

    .legend-color {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-right: 8px;
      flex-shrink: 0;
    }

    .legend-color.green { background-color: #10b981; }
    .legend-color.red { background-color: #ef4444; }
    .legend-color.blue { background-color: #3b82f6; }
    .legend-color.yellow { background-color: #f59e0b; }

    .calendar-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 11px;
      background: white;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .calendar-table th,
    .calendar-table td {
      border: 1px solid #d1d5db;
      text-align: center;
      vertical-align: middle;
    }

    .calendar-table th {
      background: #f3f4f6;
      font-weight: bold;
      color: #374151;
    }

    .month-header {
      background: #667eea !important;
      color: white !important;
      padding: 8px 4px;
      font-size: 10px;
    }

    .quarter-header {
      background: #e5e7eb !important;
      color: #6b7280 !important;
      padding: 4px 2px;
      font-size: 9px;
    }

    .tournament-name {
      text-align: left !important;
      padding: 8px 12px;
      font-weight: bold;
      background: #f9fafb;
      max-width: 150px;
      word-wrap: break-word;
    }

    .calendar-cell {
      width: 20px;
      height: 30px;
      padding: 2px;
      position: relative;
    }

    .tournament-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      margin: 0 auto;
    }

    .filled-green .tournament-dot { background-color: #10b981; }
    .filled-red .tournament-dot { background-color: #ef4444; }
    .filled-blue .tournament-dot { background-color: #3b82f6; }
    .filled-yellow .tournament-dot { background-color: #f59e0b; }

    .tournament-list {
      margin-top: 30px;
      page-break-inside: avoid;
    }

    .tournament-list h3 {
      font-size: 18px;
      margin-bottom: 15px;
      color: #667eea;
      border-bottom: 2px solid #e5e7eb;
      padding-bottom: 5px;
    }

    .tournament-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid #f1f3f4;
    }

    .tournament-info {
      flex: 1;
    }

    .tournament-title {
      font-weight: bold;
      font-size: 14px;
      margin-bottom: 2px;
    }

    .tournament-type {
      font-size: 11px;
      color: #666;
      text-transform: capitalize;
    }

    .tournament-dates {
      font-size: 12px;
      color: #333;
      text-align: right;
    }

    .footer {
      margin-top: 30px;
      text-align: center;
      font-size: 10px;
      color: #666;
      border-top: 1px solid #e5e7eb;
      padding-top: 15px;
    }

    @media print {
      body { 
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
      
      .pdf-container {
        padding: 10px;
      }
      
      .header h1 {
        font-size: 24px;
      }
      
      .calendar-table {
        font-size: 10px;
      }
    }
  </style>
</head>
<body>
  <div class="pdf-container">
    <!-- Header -->
    <div class="header">
      <h1>üèì 2025 Tournament Calendar</h1>
      <p>Malaysia Pickleball Association</p>
      <p>Official Tournament Schedule for <%= new Date().getFullYear() %></p>
      
      <div class="stats">
        <div class="stat-item">
          <div class="stat-number"><%= tournaments.length %></div>
          <div class="stat-label">Total Tournaments</div>
        </div>
        <div class="stat-item">
          <div class="stat-number">4</div>
          <div class="stat-label">Tournament Types</div>
        </div>
        <div class="stat-item">
          <div class="stat-number">12</div>
          <div class="stat-label">Months Coverage</div>
        </div>
      </div>
    </div>

    <!-- Legend -->
    <div class="legend">
      <h3>Tournament Categories</h3>
      <div class="legend-items">
        <div class="legend-item">
          <div class="legend-color green"></div>
          <span>Local Tournaments</span>
        </div>
        <div class="legend-item">
          <div class="legend-color red"></div>
          <span>State Tournaments</span>
        </div>
        <div class="legend-item">
          <div class="legend-color blue"></div>
          <span>National Tournaments</span>
        </div>
        <div class="legend-item">
          <div class="legend-color yellow"></div>
          <span>International/Major</span>
        </div>
      </div>
    </div>

    <!-- Calendar Table -->
    <table class="calendar-table">
      <thead>
        <tr>
          <th rowspan="2" class="tournament-name" style="background: #667eea !important; color: white !important;">
            Tournament
          </th>
          <% const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']; %>
          <% months.forEach(month => { %>
            <th class="month-header" colspan="4"><%= month %></th>
          <% }); %>
        </tr>
        <tr>
          <% for (let i = 0; i < months.length; i++) { %>
            <th class="quarter-header">Q1</th>
            <th class="quarter-header">Q2</th>
            <th class="quarter-header">Q3</th>
            <th class="quarter-header">Q4</th>
          <% } %>
        </tr>
      </thead>
      <tbody>
        <% 
          // Transform tournaments for display
          const tournamentData = tournaments.map(t => {
            const schedule = Array(12).fill().map(() => []);
            if (t.startDate) {
              const start = new Date(t.startDate);
              const month = start.getMonth();
              const day = start.getDate();
              let quarter = 0;
              if (day >= 1 && day <= 7) quarter = 1;
              else if (day >= 8 && day <= 14) quarter = 2;
              else if (day >= 15 && day <= 21) quarter = 3;
              else if (day >= 22) quarter = 4;
              if (quarter > 0) {
                schedule[month] = [quarter];
              }
            }
            return {
              name: t.name,
              type: t.type,
              startDate: t.startDate,
              endDate: t.endDate,
              color: `filled-${t.color}`,
              schedule
            };
          });
        %>
        
        <% if (tournamentData && tournamentData.length) { %>
          <% tournamentData.forEach((t, index) => { %>
            <tr>
              <td class="tournament-name">
                <%= t.name %>
              </td>
              <% for (let m = 0; m < months.length; m++) { %>
                <% for (let q = 1; q <= 4; q++) { %>
                  <td class="calendar-cell <%= t.schedule?.[m]?.includes(q) ? t.color : '' %>">
                    <% if (t.schedule?.[m]?.includes(q)) { %>
                      <div class="tournament-dot"></div>
                    <% } %>
                  </td>
                <% } %>
              <% } %>
            </tr>
          <% }) %>
        <% } else { %>
          <tr>
            <td colspan="49" style="padding: 20px; text-align: center; color: #666;">
              No tournaments scheduled for <%= new Date().getFullYear() %>
            </td>
          </tr>
        <% } %>
      </tbody>
    </table>

    <!-- Tournament List -->
    <div class="tournament-list">
      <h3>Tournament Details</h3>
      <% if (tournaments && tournaments.length) { %>
        <% tournaments.forEach(tournament => { %>
          <div class="tournament-item">
            <div class="tournament-info">
              <div class="tournament-title"><%= tournament.name %></div>
              <div class="tournament-type">
                <%= tournament.type.charAt(0).toUpperCase() + tournament.type.slice(1) %> Tournament
              </div>
            </div>
            <div class="tournament-dates">
              <% if (tournament.startDate) { %>
                <%= new Date(tournament.startDate).toLocaleDateString('en-GB', { 
                  day: 'numeric',
                  month: 'short',
                  year: 'numeric'
                }) %>
                <% if (tournament.endDate && tournament.endDate !== tournament.startDate) { %>
                  - <%= new Date(tournament.endDate).toLocaleDateString('en-GB', { 
                    day: 'numeric',
                    month: 'short',
                    year: 'numeric'
                  }) %>
                <% } %>
              <% } else { %>
                TBD
              <% } %>
            </div>
          </div>
        <% }) %>
      <% } %>
    </div>

    <!-- Footer -->
    <div class="footer">
      <p>Generated on <%= new Date().toLocaleDateString('en-GB', { 
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      }) %> at <%= new Date().toLocaleTimeString('en-GB', { 
        hour: '2-digit',
        minute: '2-digit'
      }) %></p>
      <p>Malaysia Pickleball Association | Official Tournament Calendar</p>
      <p>For updates and registration information, visit our official website</p>
    </div>
  </div>
</body>
</html> 